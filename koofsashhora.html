<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×§×•×¤×¡×ª ×”××¡×ª×•×¨×™×Ÿ - ×¡×™××•×œ×¦×™×”</title>
<style>
body { font-family:'Segoe UI', Tahoma, sans-serif; max-width:1200px; margin:0 auto; padding:20px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); min-height:100vh; }
.container { background:white; border-radius:15px; padding:30px; box-shadow:0 10px 40px rgba(0,0,0,0.3); }
h1 { color:#4a5568; text-align:center; margin-bottom:10px; }
.subtitle { text-align:center; color:#718096; margin-bottom:20px; font-size:1.1em; }
.controls { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; align-items:center; justify-content:center; }
.controls input { padding:6px 10px; border-radius:5px; border:1px solid #cbd5e0; }
.controls button { padding:8px 14px; border:none; border-radius:6px; background:#667eea; color:white; cursor:pointer; }
.stats { display:flex; gap:20px; justify-content:center; margin-bottom:15px; }
.stat-item { text-align:center; }
.stat-value { font-size:24px; font-weight:bold; color:#667eea; }
.stat-label { color:#718096; font-size:14px; }
.grid { display:grid; grid-template-columns:repeat(5,60px); grid-template-rows:repeat(5,60px); gap:2px; background:#2d3748; padding:10px; border-radius:10px; margin:0 auto; }
.cell { background:#4a5568; border:1px solid #718096; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:12px; color:white; transition:all 0.3s; }
.cell.measured { background:#48bb78; font-weight:bold; }
.cell.partial { background:#ed8936; font-weight:bold; }
.cell.blocked { background:#f56565; font-weight:bold; }
.legend { display:flex; gap:15px; justify-content:center; flex-wrap:wrap; margin-top:10px; }
.legend-item { display:flex; align-items:center; gap:5px; }
.legend-box { width:25px; height:25px; border-radius:4px; border:1px solid #2d3748; }
.message { text-align:center; margin-top:10px; color:#c53030; font-weight:bold; }
</style>
</head>
<body>
<div class="container">
<h1>ğŸ”¦ ×§×•×¤×¡×ª ×”××¡×ª×•×¨×™×Ÿ ğŸ”¦</h1>
<p class="subtitle">×’×œ×• ××” ×”×—×¤×¥ ×‘×§×•×¤×¡×” ××‘×œ×™ ×œ×¨××•×ª ××•×ª×•!</p>

<div class="controls">
<label>××¡×¤×¨ ××“×™×“×•×ª ××§×¡×™××œ×™: <input type="number" id="maxMeasurements" value="10" min="5" max="25"></label>
<button onclick="resetExperiment()">×”×ª×—×œ × ×™×¡×•×™ ×—×“×©</button>
<button onclick="revealObject()">×’×œ×” ××ª ×”×—×¤×¥ ×”×××™×ª×™</button>
</div>

<div class="stats">
<div class="stat-item"><div class="stat-value" id="measurementCount">0</div><div class="stat-label">××“×™×“×•×ª ×©×‘×•×¦×¢×•</div></div>
<div class="stat-item"><div class="stat-value" id="remainingCount">10</div><div class="stat-label">××“×™×“×•×ª × ×•×ª×¨×•</div></div>
</div>

<div id="measurementGrid" class="grid"></div>

<div class="legend">
<div class="legend-item"><div class="legend-box" style="background:#48bb78;"></div>×¢×‘×¨</div>
<div class="legend-item"><div class="legend-box" style="background:#ed8936;"></div>×¢×‘×¨ ×—×œ×§×™×ª (×§×¨×•×‘ ×œ××˜×¨×”)</div>
<div class="legend-item"><div class="legend-box" style="background:#f56565;"></div>× ×—×¡×</div>
<div class="legend-item"><div class="legend-box" style="background:#4a5568;"></div>×œ× × ××“×“</div>
</div>

<div class="message" id="gameMessage"></div>

<div id="observations" class="stats" style="flex-direction:column;"></div>

<div id="revealSection" style="display:none; text-align:center; margin-top:20px;">
<h2 style="color:#c53030;">×”×—×¤×¥ ×”×××™×ª×™:</h2>
<div id="actualObject" class="grid"></div>
</div>
</div>

<script>
// ×“×•×’×× ×œ×—×¤×¥ × ×¡×ª×¨
const objectPatterns = [
 [[0,0,0,0,0],[0,1,1,0,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,0,0,0]],
 [[0,0,0,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0]]
];

let currentPattern = [];
let measurements = {};
let measurementCount = 0;
let maxMeasurements = 10;

function initializeExperiment(){
  currentPattern = objectPatterns[Math.floor(Math.random()*objectPatterns.length)];
  measurements = {};
  measurementCount = 0;
  maxMeasurements = parseInt(document.getElementById('maxMeasurements').value);
  document.getElementById('measurementCount').textContent='0';
  document.getElementById('remainingCount').textContent=maxMeasurements;
  document.getElementById('gameMessage').textContent='';
  document.getElementById('revealSection').style.display='none';
  createMeasurementGrid();
  updateObservations();
}

function createMeasurementGrid(){
  const grid = document.getElementById('measurementGrid');
  grid.innerHTML='';
  for(let row=0;row<5;row++){
    for(let col=0;col<5;col++){
      const cell = document.createElement('div');
      cell.className='cell';
      const cellId = `${row}-${col}`;
      cell.dataset.cell=cellId;
      cell.innerHTML=`<small>${String.fromCharCode(65+row)}${col+1}</small>`;
      cell.onclick=()=>measureCell(row,col);

      cell.classList.remove('measured','partial','blocked');
      if(measurements[cellId]){
        if(measurements[cellId]==='pass') cell.classList.add('measured');
        else if(measurements[cellId]==='partial') cell.classList.add('partial');
        else if(measurements[cellId]==='block') cell.classList.add('blocked');
      }

      grid.appendChild(cell);
    }
  }
}

function measureCell(row,col){
  const cellId=`${row}-${col}`;
  if(measurements[cellId]){
    document.getElementById('gameMessage').textContent='×ª× ×–×” ×›×‘×¨ × ××“×“!';
    return;
  }
  if(measurementCount>=maxMeasurements){
    document.getElementById('gameMessage').textContent='×”×’×¢×ª× ×œ××¡×¤×¨ ×”××“×™×“×•×ª ×”××§×¡×™××œ×™!';
    return;
  }
  measurementCount++;
  if(currentPattern[row][col]===1) measurements[cellId]='block';
  else if(checkAdjacent(row,col)) measurements[cellId]='partial';
  else measurements[cellId]='pass';
  
  document.getElementById('measurementCount').textContent=measurementCount;
  document.getElementById('remainingCount').textContent=maxMeasurements-measurementCount;
  createMeasurementGrid();
  updateObservations();
  document.getElementById('gameMessage').textContent='';
}

function checkAdjacent(row,col){
  const dirs=[[-1,0],[1,0],[0,-1],[0,1]];
  for(let [dr,dc] of dirs){
    const r=row+dr,c=col+dc;
    if(r>=0&&r<5&&c>=0&&c<5){
      if(currentPattern[r][c]===1) return true;
    }
  }
  return false;
}

function updateObservations(){
  const obs = document.getElementById('observations');
  const passed = Object.values(measurements).filter(v=>v==='pass').length;
  const partial = Object.values(measurements).filter(v=>v==='partial').length;
  const blocked = Object.values(measurements).filter(v=>v==='block').length;
  obs.innerHTML=`
  <div class="stat-item">âœ… ×§×¨×Ÿ ×¢×‘×¨×”: ${passed}</div>
  <div class="stat-item">âš ï¸ ×§×¨×Ÿ ×¢×‘×¨×” ×—×œ×§×™×ª: ${partial}</div>
  <div class="stat-item">âŒ ×§×¨×Ÿ × ×—×¡××”: ${blocked}</div>
  `;
}

function resetExperiment(){ initializeExperiment(); }
function revealObject(){
  if(measurementCount===0){ document.getElementById('gameMessage').textContent='×‘×¦×¢×• ×œ×¤×—×•×ª ××“×™×“×” ××—×ª ×œ×¤× ×™ ×’×™×œ×•×™ ×”×—×¤×¥!'; return; }
  const section=document.getElementById('revealSection');
  section.style.display='block';
  const actual=document.getElementById('actualObject');
  actual.innerHTML='';
  actual.className='grid';
  for(let row=0;row<5;row++){
    for(let col=0;col<5;col++){
      const cell=document.createElement('div');
      cell.className='cell';
      if(currentPattern[row][col]===1) cell.classList.add('blocked');
      actual.appendChild(cell);
    }
  }
  section.scrollIntoView({behavior:'smooth', block:'nearest'});
}

initializeExperiment();
</script>
</body>
</html>
